<div class="container mt-5">
  
  <!-- ESTADO DE CARGA -->
  <div *ngIf="loading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <!-- ESTADO DE ERROR -->
  <div *ngIf="error" class="alert alert-danger text-center shadow-sm">
    <i class="fa fa-times-circle me-2"></i>
    No se pudo encontrar el perfil solicitado o el usuario no existe.
    <div class="mt-3">
        <button class="btn btn-outline-danger btn-sm" (click)="goBack()">Volver</button>
    </div>
  </div>

  <!-- TARJETA DE PERFIL PÚBLICO -->
  <div *ngIf="!loading && !error && userProfile" class="card shadow border-0 mx-auto" style="max-width: 500px; border-radius: 15px; overflow: hidden;">
    
    <!-- Encabezado con Fondo -->
    <div class="card-header bg-primary bg-gradient text-white text-center py-5 position-relative">
      <!-- Fondo decorativo opcional -->
      <div class="position-absolute top-0 start-0 w-100 h-100" style="opacity: 0.1; background-image: url('assets/images/pattern.png');"></div>
      <h4 class="m-0 position-relative z-1">Perfil de Viajero</h4>
    </div>

    <div class="card-body text-center pt-0">
      
      <!-- FOTO DE PERFIL (Con corrección de óvalo) -->
      <div class="position-relative" style="margin-top: -75px;">
        <img 
          [src]="userProfile.profilePhoto || defaultAvatar" 
          (error)="onImageError($event)"
          alt="Foto de perfil"
          class="rounded-circle border border-4 border-white shadow bg-white"
          style="width: 150px; height: 150px; object-fit: cover;"
        >
      </div>

      <!-- DATOS DEL USUARIO -->
      <h3 class="card-title mt-3 fw-bold text-dark">{{ userProfile.name }} {{ userProfile.surname }}</h3>
      
      <!-- Escapamos el @ para Angular 17+ -->
      <p class="text-muted mb-4">&#64;{{ userProfile.userName }}</p>

      <hr class="opacity-25 mx-5">

      <div class="row text-center mt-4 mb-3">
        <div class="col-6 border-end">
           <h5 class="fw-bold text-primary mb-0">--</h5>
           <small class="text-muted text-uppercase" style="font-size: 0.75rem; letter-spacing: 1px;">Viajes</small>
        </div>
        <div class="col-6">
           <h5 class="fw-bold text-warning mb-0">--</h5>
           <small class="text-muted text-uppercase" style="font-size: 0.75rem; letter-spacing: 1px;">Reviews</small>
        </div>
      </div>

    </div>
    
    <div class="card-footer bg-white border-0 text-center pb-4 pt-0">
        <button class="btn btn-outline-secondary rounded-pill px-4" (click)="goBack()">
            <i class="fa fa-arrow-left me-2"></i> Volver
        </button>
    </div>
  </div>

</div>